/* =========================================
   1. CSS変数・テーマ設定
   ========================================= */
:root {
    /* Key Colors */
    --color-primary: #00A3BF;
    /* cyan600 */
    --color-secondary: #2BC8E4;
    /* cyan400 */
    --color-tertiary: #008299;
    /* cyan800 */

    /* Functional Colors */
    --color-success: #10B981;
    --color-warning: #F59E0B;
    --color-danger: #EF4444;
    --color-info: #3B82F6;

    /* Background Colors (Light Mode) */
    --bg-main: #FFFFFF;
    --bg-secondary: #F0F9FA;
    --bg-card: #FFFFFF;
    --bg-input: #F9FAFB;

    /* Text Colors (Light Mode) */
    --text-primary: #1F2937;
    --text-secondary: #4B5563;
    --text-tertiary: #6B7280;
    --text-link: #008299;
    --text-btn: #FFFFFF;

    /* Spacing */
    --space-xxs: 2px;
    --space-xs: 4px;
    --space-sm: 8px;
    --space-md: 16px;
    --space-lg: 24px;
    --space-xl: 32px;

    /* Typography */
    --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    --font-size-base: 16px;
    --font-size-xs: 12px;
    --font-size-sm: 14px;
    --font-size-lg: 18px;
    --font-size-xl: 24px;
    --font-size-xxl: 28px;
    --font-size-heading: 20px;

    /* Borders & Radius */
    --border-radius-sm: 4px;
    --border-radius-md: 8px;
    --border-radius-lg: 12px;
    --border-color: #E5E7EB;

    /* Shadows - Enhanced with brand color */
    --shadow-sm: 0 2px 8px rgba(0, 163, 191, 0.08);
    --shadow-md: 0 4px 20px rgba(0, 163, 191, 0.12), 0 2px 8px rgba(0, 0, 0, 0.04);
    --shadow-lg: 0 8px 32px rgba(0, 163, 191, 0.16), 0 4px 12px rgba(0, 0, 0, 0.06);
    --shadow-glow: 0 0 20px rgba(43, 200, 228, 0.3);

    /* Transitions */
    --transition-base: 0.25s cubic-bezier(0.4, 0, 0.2, 1);

    /* Gradients */
    --gradient-primary: linear-gradient(135deg, var(--color-primary) 0%, var(--color-secondary) 100%);
    --gradient-bg: linear-gradient(180deg, var(--bg-secondary) 0%, var(--bg-main) 50%, var(--bg-secondary) 100%);
    --gradient-card: linear-gradient(145deg, rgba(255, 255, 255, 0.9) 0%, rgba(240, 249, 250, 0.9) 100%);
    --gradient-fab-secondary: linear-gradient(135deg, #EF4444 0%, #F87171 100%);
    --gradient-fab-loading: linear-gradient(135deg, #7FB3BD 0%, #9DD4E4 100%);
}

/* Dark Mode Overrides */
@media (prefers-color-scheme: dark) {
    :root {
        /* Key Colors Adjusted */
        --color-primary: rgba(0, 163, 191, 0.9);
        --color-tertiary: #00A3BF;

        /* Background Colors */
        --bg-main: #0B1F24;
        --bg-secondary: #142B32;
        --bg-card: #1A3942;
        --bg-input: #0F262E;

        /* Text Colors */
        --text-primary: #F9FAFB;
        --text-secondary: #D1D5DB;
        --text-tertiary: #9CA3AF;
        --text-link: #2BC8E4;
        --text-btn: #0B1F24;

        /* Dark text on bright buttons */
        --border-color: rgba(43, 200, 228, 0.2);

        /* Dark mode shadows */
        --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.3);
        --shadow-md: 0 4px 20px rgba(0, 0, 0, 0.4);
        --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.5);

        /* Dark mode gradients */
        --gradient-bg: linear-gradient(180deg, var(--bg-secondary) 0%, var(--bg-main) 50%, var(--bg-secondary) 100%);
        --gradient-card: linear-gradient(145deg, rgba(26, 57, 66, 0.9) 0%, rgba(20, 43, 50, 0.9) 100%);
    }
}

/* =========================================
   2. グローバルリセット・基本スタイル
   ========================================= */
* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

html {
    height: 100%;
    /* Solid color for iOS safe area and overscroll */
    background-color: var(--bg-secondary);
    background-image: var(--gradient-bg);
    background-attachment: fixed;
    /* Prevent overscroll bounce showing white */
    overscroll-behavior: none;
}

body {
    font-family: var(--font-family);
    font-size: var(--font-size-base);
    line-height: 1.6;
    /* Solid color fallback for iOS */
    background-color: var(--bg-secondary);
    background-image: var(--gradient-bg);
    background-attachment: fixed;
    color: var(--text-primary);
    min-height: 100%;
    min-height: 100dvh;
    -webkit-font-smoothing: antialiased;
    overscroll-behavior: none;
    /* iOS safe area support */
    padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
}

/* Dark mode background color override */
@media (prefers-color-scheme: dark) {

    html,
    body {
        background-color: #0D2229;
    }
}

h1,
h2,
h3,
h4,
h5,
h6 {
    color: var(--text-primary);
    /* Or Tertiary for specific headers if needed */
    font-weight: 700;
    margin-bottom: var(--space-md);
}

h1 {
    font-size: var(--font-size-xl);
}

h2 {
    font-size: var(--font-size-heading);
    color: var(--color-tertiary);
}

h2 i {
    margin-right: var(--space-sm);
}

a {
    color: var(--text-link);
    text-decoration: none;
    transition: color var(--transition-base);
}

a:hover {
    color: var(--color-secondary);
}

button {
    cursor: pointer;
    font-family: inherit;
    border: none;
    outline: none;
}

/* Utility Classes */
.hidden {
    display: none !important;
}


.text-warning {
    color: var(--color-warning) !important;
    font-weight: 600;
}


/* =========================================
   3. レイアウト・コンテナ
   ========================================= */
.container {
    width: 100%;
    max-width: 1280px;
    margin: 0 auto;
    padding: var(--space-lg);
}

/* View Sections - Enhanced transitions */
.view-section {
    min-height: calc(100vh - 80px);
    padding-bottom: var(--space-xl);
    animation: pageSlideIn 0.4s cubic-bezier(0.16, 1, 0.3, 1);
}

@keyframes pageSlideIn {
    from {
        opacity: 0;
        transform: translateY(20px) scale(0.98);
    }

    to {
        opacity: 1;
        transform: translateY(0) scale(1);
    }
}



/* =========================================
   4. ヘッダー・ナビゲーション
   ========================================= */
#app-header {
    background: var(--gradient-card);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    box-shadow: var(--shadow-md);
    border-bottom: 1px solid rgba(0, 163, 191, 0.1);
    position: sticky;
    top: 0;
    z-index: 100;
}

.header-container {
    max-width: 1280px;
    margin: 0 auto;
    padding: var(--space-md) var(--space-lg);
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
}

.app-title {
    font-size: var(--font-size-heading);
    color: var(--color-tertiary);
    margin-bottom: 0;
    font-weight: 700;
}

.main-nav {
    display: flex;
    gap: var(--space-sm);
}

.nav-btn {
    background-color: transparent;
    color: var(--text-secondary);
    padding: var(--space-sm) var(--space-md);
    border-radius: var(--border-radius-md);
    font-weight: 500;
    transition: all var(--transition-base);
    font-size: var(--font-size-sm);
    display: inline-flex;
    align-items: center;
    gap: var(--space-xs);
    position: relative;
    overflow: hidden;
}

.nav-btn:hover {
    background: rgba(0, 163, 191, 0.1);
    color: var(--color-secondary);
}

/* Ensure icons in nav buttons display correctly */
.nav-btn i {
    font-size: var(--font-size-base);
    display: inline-block;
    width: 1em;
    text-align: center;
    transition: transform var(--transition-base);
}

.nav-btn:hover i {
    transform: scale(1.1);
}

/* Active state with gradient indicator */
.nav-btn.active {
    background: var(--gradient-primary);
    color: var(--text-btn);
    box-shadow: var(--shadow-glow);
}

.nav-btn.active i {
    color: var(--text-btn);
}

/* Mobile Navigation - Two-row layout with Icons Only */
@media (max-width: 767px) {
    .header-container {
        flex-direction: column;
        gap: var(--space-sm);
        padding: var(--space-sm) var(--space-md);
    }

    .app-title {
        font-size: var(--font-size-heading);
        text-align: center;
        width: 100%;
    }

    .main-nav {
        width: 100%;
        justify-content: space-around;
        gap: 0;
    }

    .nav-btn {
        padding: var(--space-sm);
        min-width: 44px;
        height: 44px;
        flex: 1;
        justify-content: center;
    }

    .nav-btn i {
        font-size: var(--font-size-heading);
    }

    .nav-btn .nav-text {
        display: none;
    }
}

/* =========================================
   5. コンポーネント（フォーム・ボタン・カード）
   ========================================= */

/* Cards - Enhanced with glassmorphism */
.info-card {
    background: var(--gradient-card);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    padding: var(--space-lg);
    border-radius: var(--border-radius-lg);
    box-shadow: var(--shadow-md);
    margin-bottom: var(--space-lg);
    border: 1px solid rgba(0, 163, 191, 0.15);
    transition: all var(--transition-base);
}

.info-card:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg);
}

/* Forms */
.form-group {
    margin-bottom: var(--space-lg);
    position: relative;
    /* For tooltips */
}

.form-group label {
    font-weight: 500;
    color: var(--text-secondary);
}

/* Form Card Sections for categorization */
.form-section {
    background: var(--gradient-card);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid rgba(0, 163, 191, 0.15);
    border-radius: var(--border-radius-lg);
    padding: var(--space-lg);
    margin-bottom: var(--space-lg);
    box-shadow: var(--shadow-sm);
}

.form-section-title {
    font-size: var(--font-size-lg);
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: var(--space-md);
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    padding-bottom: var(--space-sm);
    border-bottom: 2px solid rgba(0, 163, 191, 0.2);
}

.form-section-title i {
    color: var(--color-primary);
    font-size: var(--font-size-lg);
}

/* Required/Optional Badges */
.required::after,
.optional::after {
    display: inline-flex;
    align-items: center;
    padding: var(--space-xxs) var(--space-sm);
    border-radius: var(--border-radius-sm);
    font-size: var(--font-size-xs);
    font-weight: 600;
    margin-left: var(--space-sm);
    vertical-align: middle;
    line-height: 1;
    white-space: nowrap;
}

.required::after {
    content: "必須";
    background: rgba(239, 68, 68, 0.1);
    color: var(--color-danger);
    border: 1px solid rgba(239, 68, 68, 0.3);
}

.optional::after {
    content: "任意";
    background: rgba(16, 185, 129, 0.1);
    color: var(--color-success);
    border: 1px solid rgba(16, 185, 129, 0.3);
}

.form-group label {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
}

/* Enhanced Input Styles with Focus Animation */
input[type="text"],
input[type="number"],
input[type="time"],
textarea,
select {
    display: block;
    box-sizing: border-box;
    width: 100%;
    max-width: 100%;
    padding: 14px 16px;
    background-color: var(--bg-input);
    border: 2px solid var(--border-color);
    border-radius: var(--border-radius-md);
    color: var(--text-primary);
    font-size: var(--font-size-base);
    transition: all var(--transition-base);
}

/* Align the width and left-align the text */
input[type="time"] {
    -webkit-appearance: none;
    appearance: none;
    min-width: 0;
}

input[type="time"]::-webkit-date-and-time-value {
    text-align: left;
}

input:focus,
textarea:focus,
select:focus {
    border-color: var(--color-primary);
    box-shadow: 0 0 0 4px rgba(0, 163, 191, 0.15), var(--shadow-glow);
    outline: none;
}

/* Custom Select Arrow */
select {
    appearance: none;
    -webkit-appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%2300A3BF' d='M6 8L1 3h10z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 12px center;
    padding-right: 40px;
}

input:disabled,
textarea:disabled,
select:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    background-color: rgba(0, 0, 0, 0.05);
    /* Slightly darker for disabled */
}

/* Auto-resizing textareas */
textarea {
    resize: none;
    overflow-y: hidden;
    min-height: auto;
}

/* Character Count */
.char-count {
    text-align: right;
    font-size: var(--font-size-sm);
    color: var(--text-tertiary);
    margin-top: var(--space-xs);
}

/* Buttons - Enhanced with gradients and effects */
.btn-primary,
.btn-secondary,
.btn-danger {
    padding: 14px 28px;
    border-radius: var(--border-radius-md);
    font-weight: 600;
    font-size: var(--font-size-base);
    transition: all var(--transition-base);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-sm);
    min-width: 120px;
    position: relative;
    overflow: hidden;
}

/* Ripple effect with animation */
.btn-primary::after,
.btn-secondary::after,
.btn-danger::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 5px;
    height: 5px;
    background: rgba(255, 255, 255, 0.4);
    border-radius: 50%;
    transform: translate(-50%, -50%) scale(0);
    opacity: 0;
}

@keyframes ripple {
    0% {
        transform: translate(-50%, -50%) scale(0);
        opacity: 1;
    }

    100% {
        transform: translate(-50%, -50%) scale(60);
        opacity: 0;
    }
}

.btn-primary:active::after,
.btn-secondary:active::after,
.btn-danger:active::after {
    animation: ripple 0.5s ease-out;
}

.btn-primary {
    background: var(--gradient-primary);
    color: var(--text-btn);
    box-shadow: var(--shadow-md);
}

.btn-primary:hover:not(:disabled) {
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg), var(--shadow-glow);
}

.btn-primary:active:not(:disabled) {
    transform: translateY(0);
}

.btn-secondary {
    background: transparent;
    border: 2px solid var(--color-secondary);
    color: var(--color-secondary);
}

.btn-secondary:hover:not(:disabled) {
    background: rgba(43, 200, 228, 0.1);
    transform: translateY(-2px);
}

.btn-secondary:active:not(:disabled) {
    transform: translateY(0);
}

.btn-danger {
    background: transparent;
    border: 2px solid var(--color-danger);
    color: var(--color-danger);
}

.btn-danger:hover:not(:disabled) {
    background: rgba(239, 68, 68, 0.1);
    transform: translateY(-2px);
}

.btn-danger:active:not(:disabled) {
    transform: translateY(0);
}

button:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    transform: none !important;
}

.form-actions {
    display: flex;
    gap: var(--space-md);
    margin-top: var(--space-xl);
}

/* Mobile Buttons */
@media (max-width: 767px) {
    .form-actions {
        flex-direction: column;
    }

    .btn-primary,
    .btn-secondary,
    .btn-danger {
        width: 100%;
        min-height: 44px;
        /* Touch target size */
    }
}

/* Floating Action Button (FAB) */
.fab {
    position: fixed;
    bottom: 24px;
    right: 24px;
    width: 56px;
    height: 56px;
    border-radius: 50%;
    background: var(--gradient-primary);
    color: var(--text-btn);
    border: none;
    font-size: var(--font-size-xl);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: var(--shadow-lg), var(--shadow-glow);
    transition: all var(--transition-base);
    z-index: 500;
}

.fab:hover {
    transform: translateY(-3px) scale(1.05);
    box-shadow: var(--shadow-lg), 0 0 30px rgba(43, 200, 228, 0.5);
}

.fab:active {
    transform: translateY(0) scale(0.95);
}

.fab i {
    font-size: var(--font-size-xl);
}

/* FAB Mobile - Larger touch target */
@media (max-width: 767px) {
    .fab {
        bottom: 16px;
        right: 16px;
        width: 60px;
        height: 60px;
        font-size: 26px;
    }

    .fab i {
        font-size: 26px;
    }
}

/* FAB Secondary (Danger) Style - for disabled notification */
.fab.fab-secondary {
    background: var(--gradient-fab-secondary);
    box-shadow: var(--shadow-lg), 0 0 20px rgba(239, 68, 68, 0.3);
}

.fab.fab-secondary:hover {
    box-shadow: var(--shadow-lg), 0 0 30px rgba(239, 68, 68, 0.5);
}

/* FAB Loading State - Grayed-out primary gradient */
.fab.fab-loading {
    background: var(--gradient-fab-loading);
    box-shadow: var(--shadow-lg), 0 0 20px rgba(127, 179, 189, 0.3);
    pointer-events: none;
    cursor: not-allowed;
    opacity: 0.8;
}

/* FAB Notification - Position above help FAB */
#fab-notification {
    bottom: 96px;
}

@media (max-width: 767px) {
    #fab-notification {
        bottom: 92px;
    }
}

/* Toggle Switch - Modern replacement for checkbox */
.toggle-group {
    display: flex;
    align-items: center;
    gap: var(--space-md);
}

.toggle-switch {
    position: relative;
    width: 56px;
    height: 32px;
    flex-shrink: 0;
}

.toggle-switch input {
    opacity: 0;
    width: 0;
    height: 0;
}

.toggle-slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: var(--text-tertiary);
    transition: all var(--transition-base);
    border-radius: 32px;
}

.toggle-slider::before {
    content: '';
    position: absolute;
    height: 26px;
    width: 26px;
    left: 3px;
    bottom: 3px;
    background: white;
    transition: all var(--transition-base);
    border-radius: 50%;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

.toggle-switch input:checked+.toggle-slider {
    background: var(--gradient-primary);
    box-shadow: var(--shadow-glow);
}

.toggle-switch input:checked+.toggle-slider::before {
    transform: translateX(24px);
}

.toggle-switch input:focus+.toggle-slider {
    box-shadow: 0 0 0 4px rgba(0, 163, 191, 0.2);
}

.toggle-switch input:disabled+.toggle-slider {
    opacity: 0.5;
    cursor: not-allowed;
}

.toggle-label {
    font-weight: 500;
    color: var(--text-primary);
    cursor: pointer;
    user-select: none;
}


/* Custom Sliders - Modern styling */
.slider-group {
    display: flex;
    flex-direction: column;
}

input[type="range"] {
    -webkit-appearance: none;
    appearance: none;
    width: 100%;
    height: 8px;
    margin: var(--space-md) 0;
    cursor: pointer;
    background: linear-gradient(to right, var(--color-primary) 0%, var(--border-color) 0%);
    border-radius: var(--border-radius-sm);
    outline: none;
    transition: all var(--transition-base);
}

input[type="range"]:hover {
    box-shadow: 0 0 0 4px rgba(0, 163, 191, 0.1);
}

/* Webkit (Chrome, Safari) Track */
input[type="range"]::-webkit-slider-runnable-track {
    height: 8px;
    border-radius: var(--border-radius-sm);
    background: transparent;
}

/* Webkit Thumb */
input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 24px;
    height: 24px;
    border-radius: 50%;
    background: var(--gradient-primary);
    border: 3px solid white;
    box-shadow: var(--shadow-md), 0 0 0 1px rgba(0, 163, 191, 0.2);
    cursor: pointer;
    margin-top: -8px;
    transition: all var(--transition-base);
}

input[type="range"]::-webkit-slider-thumb:hover {
    transform: scale(1.1);
    box-shadow: var(--shadow-lg), var(--shadow-glow);
}

input[type="range"]:active::-webkit-slider-thumb {
    transform: scale(0.95);
}

/* Firefox Track */
input[type="range"]::-moz-range-track {
    height: 8px;
    border-radius: var(--border-radius-sm);
    background: var(--border-color);
}

/* Firefox Progress (filled portion) */
input[type="range"]::-moz-range-progress {
    height: 8px;
    border-radius: var(--border-radius-sm);
    background: var(--gradient-primary);
}

/* Firefox Thumb */
input[type="range"]::-moz-range-thumb {
    width: 24px;
    height: 24px;
    border-radius: 50%;
    background: var(--gradient-primary);
    border: 3px solid white;
    box-shadow: var(--shadow-md), 0 0 0 1px rgba(0, 163, 191, 0.2);
    cursor: pointer;
    transition: all var(--transition-base);
}

input[type="range"]::-moz-range-thumb:hover {
    transform: scale(1.1);
    box-shadow: var(--shadow-lg), var(--shadow-glow);
}

input[type="range"]:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

input[type="range"]:disabled::-webkit-slider-thumb {
    cursor: not-allowed;
}

.slider-value {
    display: inline-flex;
    justify-content: center;
    align-items: center;
    width: 40px;
    height: 40px;
    margin: 0 auto;
    border-radius: 50%;
    background: var(--gradient-primary);
    color: white;
    font-weight: 700;
    font-size: var(--font-size-lg);
    box-shadow: var(--shadow-md);
}

/* =========================================
   6. ビュー固有スタイル
   ========================================= */

/* Loading View - Enhanced */
#view-loading {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    background: var(--gradient-bg);
}

.spinner {
    width: 56px;
    height: 56px;
    border-radius: 50%;
    background: conic-gradient(from 0deg,
            transparent 0deg,
            var(--color-primary) 90deg,
            var(--color-secondary) 180deg,
            transparent 270deg);
    animation: spin 1s linear infinite;
    margin-bottom: var(--space-lg);
    position: relative;
}

.spinner::before {
    content: '';
    position: absolute;
    top: 4px;
    left: 4px;
    right: 4px;
    bottom: 4px;
    background: var(--bg-main);
    border-radius: 50%;
}

.spinner::after {
    content: '';
    position: absolute;
    top: -4px;
    left: -4px;
    right: -4px;
    bottom: -4px;
    border-radius: 50%;
    box-shadow: var(--shadow-glow);
    animation: pulse 2s ease-in-out infinite;
}

.spinner-container {
    text-align: center;
    color: var(--text-secondary);
}

.spinner-container p {
    font-weight: 500;
    color: var(--color-tertiary);
}

@keyframes spin {
    0% {
        transform: rotate(0deg);
    }

    100% {
        transform: rotate(360deg);
    }
}

@keyframes pulse {

    0%,
    100% {
        opacity: 0.5;
        transform: scale(1);
    }

    50% {
        opacity: 1;
        transform: scale(1.05);
    }
}

/* Login View - Enhanced with animated gradients */
#view-login {
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-main) 50%, var(--bg-secondary) 100%);
    position: relative;
    overflow: hidden;
}

/* Animated gradient orbs */
#view-login::before {
    content: '';
    position: absolute;
    width: 600px;
    height: 600px;
    background: radial-gradient(circle, rgba(0, 163, 191, 0.15) 0%, transparent 70%);
    top: -200px;
    right: -200px;
    animation: float 6s ease-in-out infinite;
}

#view-login::after {
    content: '';
    position: absolute;
    width: 400px;
    height: 400px;
    background: radial-gradient(circle, rgba(43, 200, 228, 0.1) 0%, transparent 70%);
    bottom: -100px;
    left: -100px;
    animation: float 8s ease-in-out infinite reverse;
}

@keyframes float {

    0%,
    100% {
        transform: translateY(0) rotate(0deg);
    }

    50% {
        transform: translateY(-30px) rotate(5deg);
    }
}

.login-container {
    width: 100%;
    max-width: 400px;
    padding: var(--space-lg);
    position: relative;
    z-index: 1;
}

.login-card {
    background: var(--gradient-card);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    padding: var(--space-xl);
    border-radius: var(--border-radius-lg);
    box-shadow: var(--shadow-lg);
    text-align: center;
    border: 1px solid rgba(0, 163, 191, 0.15);
}

.login-title {
    font-size: var(--font-size-xxl);
    background: var(--gradient-primary);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: var(--space-sm);
}

.login-description {
    color: var(--text-secondary);
    margin-bottom: var(--space-xl);
    font-size: var(--font-size-sm);
}

.btn-google-login {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-sm);
    width: 100%;
    padding: 14px 24px;
    background-color: #4285F4;
    color: var(--text-btn);
    font-size: var(--font-size-base);
    font-weight: 600;
    border: none;
    border-radius: var(--border-radius-md);
    cursor: pointer;
    transition: all var(--transition-base);
}

.btn-google-login:hover {
    background-color: #357ABD;
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.btn-google-login:active {
    transform: translateY(0);
}

.btn-google-login i {
    font-size: var(--font-size-lg);
}

/* Logout Button in Header */
.nav-btn-logout {
    background-color: transparent;
    color: var(--text-secondary);
    padding: var(--space-sm) var(--space-md);
    border-radius: var(--border-radius-md);
    font-weight: 500;
    transition: all var(--transition-base);
    font-size: var(--font-size-sm);
    display: inline-flex;
    align-items: center;
    gap: var(--space-xs);
    position: relative;
    overflow: hidden;
}

.nav-btn-logout:hover {
    background-color: rgba(239, 68, 68, 0.1);
    color: var(--color-danger);
}

.nav-btn-logout i {
    font-size: var(--font-size-base);
    display: inline-block;
    width: 1em;
    text-align: center;
    transition: transform var(--transition-base);
}

.nav-btn-logout:hover i {
    transform: scale(1.1);
}

/* Record View */
.disabled-section {
    opacity: 0.5;
    pointer-events: none;
    transition: opacity var(--transition-base);
}


/* Results View */
.results-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space-md);
}


/* Record View Section (Date Input + Button) */
.record-view-section {
    display: flex;
    gap: var(--space-md);
    align-items: flex-end;
    margin-bottom: var(--space-lg);
}

.record-view-section .form-group {
    flex: 1;
    margin-bottom: 0;
}

.record-view-section #record-date-input {
    cursor: pointer;
}

.record-view-section #btn-view-record {
    flex-shrink: 0;
    height: 46px;
}

@media (max-width: 767px) {
    .record-view-section {
        flex-direction: column;
        align-items: stretch;
    }

    .record-view-section #btn-view-record {
        width: 100%;
    }
}


/* Accordion for Charts & Library */
.accordion-item {
    margin-bottom: var(--space-md);
    background: var(--gradient-card);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid rgba(0, 163, 191, 0.15);
    border-radius: var(--border-radius-lg);
    overflow: hidden;
    transition: all var(--transition-base);
}

.accordion-item:hover {
    box-shadow: var(--shadow-md);
}

.accordion-header {
    width: 100%;
    text-align: left;
    padding: var(--space-md);
    background: transparent;
    color: var(--text-primary);
    font-weight: 600;
    cursor: pointer;
    list-style: none;
    position: relative;
    padding-right: 40px;
    transition: all var(--transition-base);
}

.accordion-header:hover {
    background: rgba(0, 163, 191, 0.05);
}

.accordion-header::-webkit-details-marker {
    display: none;
}

.accordion-header::after {
    content: '\f078';
    font-family: 'Font Awesome 6 Free';
    font-weight: 900;
    font-size: var(--font-size-sm);
    position: absolute;
    right: var(--space-md);
    top: 50%;
    transform: translateY(-50%);
    color: var(--color-primary);
    transition: transform var(--transition-base);
}

.accordion-item[open] .accordion-header::after {
    transform: translateY(-50%) rotate(180deg);
}

.accordion-item[open] .accordion-header {
    border-bottom: 1px solid rgba(0, 163, 191, 0.1);
}

.accordion-content {
    padding: var(--space-md);
    background-color: var(--bg-main);
    animation: slideDown 0.3s ease-out;
}

/* Library View */
.library-list {
    display: flex;
    flex-direction: column;
    gap: var(--space-md);
}

.library-item {
    background: var(--gradient-card);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    margin-bottom: var(--space-md);
    border: 1px solid rgba(0, 163, 191, 0.15);
    border-radius: var(--border-radius-lg);
    overflow: hidden;
    transition: all var(--transition-base);
}

.library-item:hover {
    box-shadow: var(--shadow-md);
}

.library-item summary {
    padding: var(--space-lg);
    cursor: pointer;
    font-weight: 600;
    color: var(--color-tertiary);
    list-style: none;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: space-between;
    transition: all var(--transition-base);
}

.library-item summary:hover {
    background: rgba(0, 163, 191, 0.05);
}

.library-item summary::-webkit-details-marker {
    display: none;
}

.library-item summary::after {
    content: '\f078';
    font-family: 'Font Awesome 6 Free';
    font-weight: 900;
    font-size: var(--font-size-sm);
    color: var(--color-primary);
    transition: transform var(--transition-base);
}

.library-item[open] summary::after {
    transform: rotate(180deg);
}

.library-item[open] summary {
    border-bottom: 1px solid rgba(0, 163, 191, 0.1);
}

.library-content {
    padding: var(--space-lg);
    padding-top: var(--space-md);
    color: var(--text-secondary);
    line-height: 1.8;
    animation: slideDown 0.3s ease-out;
}

@keyframes slideDown {
    from {
        opacity: 0;
        transform: translateY(-10px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* =========================================
   7. モーダル・ツールチップ
   ========================================= */

/* Modal - with backdrop blur */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.4);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
    opacity: 1;
    transition: opacity 0.3s ease, backdrop-filter 0.3s ease;
}

.modal-overlay.hidden {
    opacity: 0;
    pointer-events: none;
}

.modal-content {
    background-color: var(--bg-card);
    padding: var(--space-xl);
    border-radius: var(--border-radius-lg);
    width: 90%;
    max-width: 500px;
    max-height: 80vh;
    overflow-y: auto;
    box-shadow: var(--shadow-lg);
    transform: translateY(0);
    transition: transform 0.3s ease;
    text-align: center;
}

.modal-overlay.hidden .modal-content {
    transform: translateY(20px);
}

#modal-message {
    margin-bottom: var(--space-lg);
    font-size: var(--font-size-lg);
    color: var(--text-primary);
}

/* Record Detail Modal - scrollable content with padding */
#modal-record-detail {
    padding: var(--space-md);
    max-height: calc(80vh - 120px);
    overflow-y: auto;
}

/* Tooltips */
.tooltip {
    display: none;
    position: absolute;
    background-color: var(--text-primary);
    color: var(--bg-main);
    padding: var(--space-xs) var(--space-sm);
    border-radius: var(--border-radius-sm);
    font-size: var(--font-size-sm);
    bottom: 100%;
    left: 0;
    white-space: nowrap;
    z-index: 10;
    box-shadow: var(--shadow-md);
}

/* Desktop: Show tooltip on hover/focus */
@media (min-width: 960px) {

    .form-group:hover .tooltip,
    input:focus+.tooltip {
        display: block;
    }
}

/* Mobile/Tablet: Use info icon approach if strictly needed, 
   but for simplicity and standard HTML behavior, 
   we rely on the placeholder or helper text for now, 
   or the tooltip class can be toggled via JS if we add an icon. 
   Requirements mentioned "Info icon" for mobile. 
   I will add a pseudo-element or class for that if I were modifying HTML, 
   but here I'll stick to CSS. 
   Let's make sure tooltips are visible when active on mobile if possible, 
   or rely on the text below input. */

/* =========================================
   8. Chart.js カスタマイズ
   ========================================= */
canvas {
    max-width: 100%;
}

/* Chart container sizing for proper Chart.js rendering */
.accordion-content {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 700px;
}

@media (max-width: 767px) {
    .accordion-content {
        height: 400px;
    }
}

/* =========================================
   9. バリデーションフィードバック
   ========================================= */
.input-error {
    border-color: var(--color-danger) !important;
    box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.2) !important;
}

.tooltip-error {
    position: absolute;
    background-color: var(--color-danger);
    color: white;
    padding: var(--space-xs) var(--space-sm);
    border-radius: var(--border-radius-sm);
    font-size: var(--font-size-xs);
    bottom: 100%;
    left: 0;
    white-space: nowrap;
    z-index: 10;
    margin-bottom: 4px;
    animation: fadeIn 0.2s ease-out;
}

.tooltip-error::after {
    content: '';
    position: absolute;
    top: 100%;
    left: 10px;
    border-width: 5px;
    border-style: solid;
    border-color: var(--color-danger) transparent transparent transparent;
}

/* =========================================
   10. カレンダースタイル
   ========================================= */
.day-success {
    background-color: rgba(16, 185, 129, 0.2) !important;
    border-color: var(--color-success) !important;
}

.day-failure {
    background-color: rgba(239, 68, 68, 0.1) !important;
}