/* =========================================
   1. CSS Variables & Theming
   ========================================= */
:root {
    /* Key Colors */
    --color-primary: #00A3BF;
    /* cyan600 */
    --color-secondary: #2BC8E4;
    /* cyan400 */
    --color-tertiary: #008299;
    /* cyan800 */

    /* Functional Colors */
    --color-success: #10B981;
    --color-warning: #F59E0B;
    --color-danger: #EF4444;
    --color-info: #3B82F6;

    /* Background Colors (Light Mode) */
    --bg-main: #FFFFFF;
    --bg-secondary: #F0F9FA;
    --bg-card: #FFFFFF;
    --bg-input: #F9FAFB;

    /* Text Colors (Light Mode) */
    --text-primary: #1F2937;
    --text-secondary: #4B5563;
    --text-tertiary: #6B7280;
    --text-link: #008299;
    --text-btn: #FFFFFF;

    /* Spacing */
    --space-xs: 4px;
    --space-sm: 8px;
    --space-md: 16px;
    --space-lg: 24px;
    --space-xl: 32px;

    /* Typography */
    --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    --font-size-base: 16px;
    --font-size-sm: 14px;
    --font-size-lg: 18px;
    --font-size-xl: 24px;

    /* Borders & Radius */
    --border-radius-sm: 4px;
    --border-radius-md: 8px;
    --border-radius-lg: 12px;
    --border-color: #E5E7EB;

    /* Shadows - Enhanced with brand color */
    --shadow-sm: 0 2px 8px rgba(0, 163, 191, 0.08);
    --shadow-md: 0 4px 20px rgba(0, 163, 191, 0.12), 0 2px 8px rgba(0, 0, 0, 0.04);
    --shadow-lg: 0 8px 32px rgba(0, 163, 191, 0.16), 0 4px 12px rgba(0, 0, 0, 0.06);
    --shadow-glow: 0 0 20px rgba(43, 200, 228, 0.3);

    /* Transitions */
    --transition-base: 0.25s cubic-bezier(0.4, 0, 0.2, 1);

    /* Gradients */
    --gradient-primary: linear-gradient(135deg, #00A3BF 0%, #2BC8E4 100%);
    --gradient-bg: linear-gradient(180deg, #F0F9FA 0%, #FFFFFF 50%, #F0F9FA 100%);
    --gradient-card: linear-gradient(145deg, rgba(255, 255, 255, 0.9) 0%, rgba(240, 249, 250, 0.9) 100%);
}

/* Dark Mode Overrides */
@media (prefers-color-scheme: dark) {
    :root {
        /* Key Colors Adjusted */
        --color-primary: rgba(0, 163, 191, 0.9);
        /* Opacity 0.9 */
        /* Secondary stays #2BC8E4 */
        --color-tertiary: #00A3BF;
        /* Lighter for dark mode */

        /* Background Colors */
        --bg-main: #0B1F24;
        --bg-secondary: #142B32;
        --bg-card: #1A3942;
        --bg-input: #0F262E;

        /* Text Colors */
        --text-primary: #F9FAFB;
        --text-secondary: #D1D5DB;
        --text-tertiary: #9CA3AF;
        --text-link: #2BC8E4;
        --text-btn: #0B1F24;
        /* Dark text on bright buttons */

        --border-color: rgba(43, 200, 228, 0.2);

        /* Dark mode shadows */
        --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.3);
        --shadow-md: 0 4px 20px rgba(0, 0, 0, 0.4);
        --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.5);

        /* Dark mode gradients */
        --gradient-bg: linear-gradient(180deg, #0B1F24 0%, #142B32 50%, #0B1F24 100%);
        --gradient-card: linear-gradient(145deg, rgba(26, 57, 66, 0.9) 0%, rgba(20, 43, 50, 0.9) 100%);
    }
}

/* =========================================
   2. Global Reset & Base Styles
   ========================================= */
* {
    box-sizing: border-box;
    margin: 0;
    padding: 0;
}

body {
    font-family: var(--font-family);
    font-size: var(--font-size-base);
    line-height: 1.6;
    background: var(--gradient-bg);
    color: var(--text-primary);
    min-height: 100vh;
    -webkit-font-smoothing: antialiased;
}

h1,
h2,
h3,
h4,
h5,
h6 {
    color: var(--text-primary);
    /* Or Tertiary for specific headers if needed */
    font-weight: 700;
    margin-bottom: var(--space-md);
}

h1 {
    font-size: var(--font-size-xl);
}

h2 {
    font-size: 20px;
    color: var(--color-tertiary);
}

h2 i {
    margin-right: 8px;
}

a {
    color: var(--text-link);
    text-decoration: none;
    transition: color var(--transition-base);
}

a:hover {
    color: var(--color-secondary);
}

button {
    cursor: pointer;
    font-family: inherit;
    border: none;
    outline: none;
}

/* Utility Classes */
.hidden {
    display: none !important;
}

.text-center {
    text-align: center;
}

.text-warning {
    color: var(--color-warning) !important;
    font-weight: 600;
}

.mt-md {
    margin-top: var(--space-md);
}

/* =========================================
   3. Layout & Container
   ========================================= */
.container {
    width: 100%;
    max-width: 1280px;
    margin: 0 auto;
    padding: var(--space-lg);
}

/* View Sections */
.view-section {
    min-height: calc(100vh - 80px);
    /* Adjust based on header height */
    padding-bottom: var(--space-xl);
    animation: fadeIn 0.3s ease-out;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(10px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* =========================================
   4. Header & Navigation
   ========================================= */
#app-header {
    background-color: var(--bg-card);
    box-shadow: var(--shadow-sm);
    position: sticky;
    top: 0;
    z-index: 100;
}

.header-container {
    max-width: 1280px;
    margin: 0 auto;
    padding: var(--space-md) var(--space-lg);
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
}

.app-title {
    font-size: 20px;
    color: var(--color-tertiary);
    margin-bottom: 0;
}

.main-nav {
    display: flex;
    gap: var(--space-sm);
}

.nav-btn {
    background-color: transparent;
    color: var(--text-secondary);
    padding: var(--space-sm) var(--space-md);
    border-radius: var(--border-radius-md);
    font-weight: 500;
    transition: all var(--transition-base);
    font-size: var(--font-size-sm);
    display: inline-flex;
    align-items: center;
    gap: var(--space-xs);
}

/* Ensure icons in nav buttons display correctly */
.nav-btn i {
    font-size: 16px;
    display: inline-block;
    width: 1em;
    text-align: center;
}

.nav-btn:hover {
    background-color: var(--bg-secondary);
    color: var(--color-secondary);
}

.nav-btn.active {
    background-color: var(--color-primary);
    color: var(--text-btn);
}

/* Mobile Navigation */
@media (max-width: 767px) {
    .header-container {
        flex-direction: column;
        gap: var(--space-md);
        padding: var(--space-md);
    }

    .main-nav {
        width: 100%;
        justify-content: space-between;
        /* Distribute evenly */
        gap: var(--space-xs);
    }

    .nav-btn {
        padding: var(--space-sm);
        font-size: 12px;
        /* Smaller font for mobile */
        flex: 1;
        text-align: center;
    }
}

/* =========================================
   5. Components (Forms, Buttons, Cards)
   ========================================= */

/* Cards - Enhanced with glassmorphism */
.info-card {
    background: var(--gradient-card);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    padding: var(--space-lg);
    border-radius: var(--border-radius-lg);
    box-shadow: var(--shadow-md);
    margin-bottom: var(--space-lg);
    border: 1px solid rgba(0, 163, 191, 0.15);
    border-left: 4px solid var(--color-primary);
    transition: all var(--transition-base);
}

.info-card:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg);
}

/* Forms */
.form-group {
    margin-bottom: var(--space-lg);
    position: relative;
    /* For tooltips */
}

.form-group label {
    font-weight: 500;
    color: var(--text-secondary);
}

/* Form Card Sections for categorization */
.form-section {
    background: var(--gradient-card);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid rgba(0, 163, 191, 0.15);
    border-radius: var(--border-radius-lg);
    padding: var(--space-lg);
    margin-bottom: var(--space-lg);
    box-shadow: var(--shadow-sm);
}

.form-section-title {
    font-size: var(--font-size-lg);
    font-weight: 600;
    color: var(--text-primary);
    margin-bottom: var(--space-md);
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    padding-bottom: var(--space-sm);
    border-bottom: 2px solid rgba(0, 163, 191, 0.2);
}

.form-section-title i {
    color: var(--color-primary);
    font-size: 18px;
}

/* Required/Optional Badges */
.required::after,
.optional::after {
    display: inline-flex;
    align-items: center;
    padding: 2px 8px;
    border-radius: 4px;
    font-size: 11px;
    font-weight: 600;
    margin-left: var(--space-sm);
    vertical-align: middle;
    line-height: 1;
    white-space: nowrap;
}

.required::after {
    content: "必須";
    background: rgba(239, 68, 68, 0.1);
    color: var(--color-danger);
    border: 1px solid rgba(239, 68, 68, 0.3);
}

.optional::after {
    content: "任意";
    background: rgba(16, 185, 129, 0.1);
    color: var(--color-success);
    border: 1px solid rgba(16, 185, 129, 0.3);
}

.form-group label {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
}

/* Enhanced Input Styles with Focus Animation */
input[type="text"],
input[type="number"],
input[type="time"],
textarea,
select {
    display: block;
    box-sizing: border-box;
    width: 100%;
    max-width: 100%;
    padding: 14px var(--space-md);
    background-color: var(--bg-input);
    border: 2px solid var(--border-color);
    border-radius: var(--border-radius-md);
    color: var(--text-primary);
    font-size: var(--font-size-base);
    transition: all var(--transition-base);
}

/* Align the width and left-align the text */
input[type="time"] {
    -webkit-appearance: none;
    appearance: none;
    min-width: 0;
}

input[type="time"]::-webkit-date-and-time-value {
    text-align: left;
}

input:focus,
textarea:focus,
select:focus {
    border-color: var(--color-primary);
    box-shadow: 0 0 0 4px rgba(0, 163, 191, 0.15), var(--shadow-glow);
    outline: none;
}

/* Custom Select Arrow */
select {
    appearance: none;
    -webkit-appearance: none;
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%2300A3BF' d='M6 8L1 3h10z'/%3E%3C/svg%3E");
    background-repeat: no-repeat;
    background-position: right 12px center;
    padding-right: 40px;
}

input:disabled,
textarea:disabled,
select:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    background-color: rgba(0, 0, 0, 0.05);
    /* Slightly darker for disabled */
}

/* Auto-resizing textareas */
textarea {
    resize: none;
    overflow-y: hidden;
    min-height: auto;
}

/* Character Count */
.char-count {
    text-align: right;
    font-size: var(--font-size-sm);
    color: var(--text-tertiary);
    margin-top: var(--space-xs);
}

/* Buttons - Enhanced with gradients and effects */
.btn-primary,
.btn-secondary,
.btn-danger {
    padding: 14px 28px;
    border: none;
    border-radius: var(--border-radius-md);
    font-weight: 600;
    font-size: var(--font-size-base);
    cursor: pointer;
    transition: all var(--transition-base);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-sm);
    min-width: 120px;
    position: relative;
    overflow: hidden;
}

/* Ripple effect base */
.btn-primary::after,
.btn-secondary::after,
.btn-danger::after {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    background: rgba(255, 255, 255, 0.3);
    border-radius: 50%;
    transform: translate(-50%, -50%);
    transition: width 0.6s, height 0.6s;
}

.btn-primary:active::after,
.btn-secondary:active::after,
.btn-danger:active::after {
    width: 300px;
    height: 300px;
}

.btn-primary {
    background: var(--gradient-primary);
    color: var(--text-btn);
    box-shadow: var(--shadow-md);
}

.btn-primary:hover:not(:disabled) {
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg), var(--shadow-glow);
}

.btn-primary:active:not(:disabled) {
    transform: translateY(0);
}

.btn-secondary {
    background: transparent;
    border: 2px solid var(--color-secondary);
    color: var(--color-secondary);
}

.btn-secondary:hover:not(:disabled) {
    background: rgba(43, 200, 228, 0.1);
    transform: translateY(-2px);
}

.btn-secondary:active:not(:disabled) {
    transform: translateY(0);
}

.btn-danger {
    background: transparent;
    border: 2px solid var(--color-danger);
    color: var(--color-danger);
}

.btn-danger:hover:not(:disabled) {
    background: rgba(239, 68, 68, 0.1);
    transform: translateY(-2px);
}

.btn-danger:active:not(:disabled) {
    transform: translateY(0);
}

button:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    transform: none !important;
}

.form-actions {
    display: flex;
    gap: var(--space-md);
    margin-top: var(--space-xl);
}

/* Mobile Buttons */
@media (max-width: 767px) {
    .form-actions {
        flex-direction: column;
    }

    .btn-primary,
    .btn-secondary,
    .btn-danger {
        width: 100%;
        min-height: 44px;
        /* Touch target size */
    }
}

/* Toggle Switch - Modern replacement for checkbox */
.toggle-group {
    display: flex;
    align-items: center;
    gap: var(--space-md);
}

.toggle-switch {
    position: relative;
    width: 56px;
    height: 32px;
    flex-shrink: 0;
}

.toggle-switch input {
    opacity: 0;
    width: 0;
    height: 0;
}

.toggle-slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: var(--text-tertiary);
    transition: all var(--transition-base);
    border-radius: 32px;
}

.toggle-slider::before {
    content: '';
    position: absolute;
    height: 26px;
    width: 26px;
    left: 3px;
    bottom: 3px;
    background: white;
    transition: all var(--transition-base);
    border-radius: 50%;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

.toggle-switch input:checked+.toggle-slider {
    background: var(--gradient-primary);
    box-shadow: var(--shadow-glow);
}

.toggle-switch input:checked+.toggle-slider::before {
    transform: translateX(24px);
}

.toggle-switch input:focus+.toggle-slider {
    box-shadow: 0 0 0 4px rgba(0, 163, 191, 0.2);
}

.toggle-switch input:disabled+.toggle-slider {
    opacity: 0.5;
    cursor: not-allowed;
}

.toggle-label {
    font-weight: 500;
    color: var(--text-primary);
    cursor: pointer;
    user-select: none;
}

/* Legacy checkbox support (for non-toggle checkboxes) */
.checkbox-group {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
}

.checkbox-group label {
    margin-bottom: 0;
    cursor: pointer;
}

input[type="checkbox"]:not(.toggle-switch input) {
    width: 20px;
    height: 20px;
    cursor: pointer;
    accent-color: var(--color-primary);
}

/* Sliders */
.slider-group {
    display: flex;
    flex-direction: column;
}

input[type="range"] {
    width: 100%;
    margin: var(--space-sm) 0;
    cursor: pointer;
    accent-color: var(--color-primary);
}

.slider-value {
    text-align: center;
    font-weight: bold;
    color: var(--color-primary);
}

/* =========================================
   6. View Specific Styles
   ========================================= */

/* Loading View */
#view-loading {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
}

.spinner {
    width: 50px;
    height: 50px;
    border: 4px solid var(--bg-input);
    border-top: 4px solid var(--color-primary);
    border-radius: 50%;
    animation: spin 1s linear infinite;
    margin-bottom: var(--space-md);
}

.spinner-container {
    text-align: center;
    color: var(--text-secondary);
}

@keyframes spin {
    0% {
        transform: rotate(0deg);
    }

    100% {
        transform: rotate(360deg);
    }
}

/* Login View - Enhanced with animated gradients */
#view-login {
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-main) 50%, var(--bg-secondary) 100%);
    position: relative;
    overflow: hidden;
}

/* Animated gradient orbs */
#view-login::before {
    content: '';
    position: absolute;
    width: 600px;
    height: 600px;
    background: radial-gradient(circle, rgba(0, 163, 191, 0.15) 0%, transparent 70%);
    top: -200px;
    right: -200px;
    animation: float 6s ease-in-out infinite;
}

#view-login::after {
    content: '';
    position: absolute;
    width: 400px;
    height: 400px;
    background: radial-gradient(circle, rgba(43, 200, 228, 0.1) 0%, transparent 70%);
    bottom: -100px;
    left: -100px;
    animation: float 8s ease-in-out infinite reverse;
}

@keyframes float {

    0%,
    100% {
        transform: translateY(0) rotate(0deg);
    }

    50% {
        transform: translateY(-30px) rotate(5deg);
    }
}

.login-container {
    width: 100%;
    max-width: 400px;
    padding: var(--space-lg);
    position: relative;
    z-index: 1;
}

.login-card {
    background: var(--gradient-card);
    backdrop-filter: blur(20px);
    -webkit-backdrop-filter: blur(20px);
    padding: var(--space-xl);
    border-radius: var(--border-radius-lg);
    box-shadow: var(--shadow-lg);
    text-align: center;
    border: 1px solid rgba(0, 163, 191, 0.15);
}

.login-title {
    font-size: 28px;
    background: var(--gradient-primary);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: var(--space-sm);
}

.login-description {
    color: var(--text-secondary);
    margin-bottom: var(--space-xl);
    font-size: var(--font-size-sm);
}

.btn-google-login {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-sm);
    width: 100%;
    padding: 14px 24px;
    background-color: #4285F4;
    color: #FFFFFF;
    font-size: var(--font-size-base);
    font-weight: 600;
    border: none;
    border-radius: var(--border-radius-md);
    cursor: pointer;
    transition: all var(--transition-base);
}

.btn-google-login:hover {
    background-color: #357ABD;
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.btn-google-login:active {
    transform: translateY(0);
}

.btn-google-login i {
    font-size: 18px;
}

/* Logout Button in Header */
.nav-btn-logout {
    background-color: transparent;
    color: var(--text-tertiary);
    padding: var(--space-sm);
    min-width: auto;
}

.nav-btn-logout:hover {
    color: var(--color-danger);
    background-color: rgba(239, 68, 68, 0.1);
}

/* Record View */
.disabled-section {
    opacity: 0.5;
    pointer-events: none;
    transition: opacity var(--transition-base);
}

.disabled-section.active {
    opacity: 1;
    pointer-events: auto;
}

/* Results View */
.results-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space-md);
}

.icon-btn {
    background: none;
    color: var(--text-secondary);
    font-size: 24px;
    padding: var(--space-sm);
}

.icon-btn:hover {
    color: var(--color-primary);
}

/* Record View Section (Date Input + Button) */
.record-view-section {
    display: flex;
    gap: var(--space-md);
    align-items: flex-end;
    margin-bottom: var(--space-lg);
}

.record-view-section .form-group {
    flex: 1;
    margin-bottom: 0;
}

.record-view-section #record-date-input {
    cursor: pointer;
}

.record-view-section #btn-view-record {
    flex-shrink: 0;
    height: 46px;
}

@media (max-width: 767px) {
    .record-view-section {
        flex-direction: column;
        align-items: stretch;
    }

    .record-view-section #btn-view-record {
        width: 100%;
    }
}

.calendar-container {
    background-color: var(--bg-card);
    padding: var(--space-md);
    border-radius: var(--border-radius-md);
    margin-bottom: var(--space-lg);
    box-shadow: var(--shadow-sm);
}

/* Accordion for Charts & Library */
.accordion-item {
    margin-bottom: var(--space-md);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-md);
    background-color: var(--bg-card);
    overflow: hidden;
}

.accordion-header {
    width: 100%;
    text-align: left;
    padding: var(--space-md);
    background-color: var(--bg-card);
    color: var(--text-primary);
    font-weight: 600;
    /* display: flex; REMOVED to allow list-style behavior for summary */
    cursor: pointer;
    list-style: none;
    /* Hide default triangle */
    position: relative;
    padding-right: 40px;
    /* Space for Custom Marker */
}

.accordion-header:hover {
    background-color: var(--bg-secondary);
}

.accordion-header::-webkit-details-marker {
    display: none;
}

.accordion-header::after {
    content: '+';
    position: absolute;
    right: var(--space-md);
    top: 50%;
    transform: translateY(-50%);
    font-weight: bold;
    color: var(--text-secondary);
    /* Use secondary or match header color? standard is usually muted */
}

.accordion-item[open] .accordion-header::after {
    content: '-';
}

.accordion-content {
    padding: var(--space-md);
    border-top: 1px solid var(--border-color);
    background-color: var(--bg-main);
}

/* Library View */
.library-list {
    display: flex;
    flex-direction: column;
    gap: var(--space-md);
}

.library-item {
    background: var(--gradient-card);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    margin-bottom: var(--space-md);
    border: 1px solid rgba(0, 163, 191, 0.15);
    border-radius: var(--border-radius-lg);
    overflow: hidden;
    transition: all var(--transition-base);
}

.library-item:hover {
    box-shadow: var(--shadow-md);
}

.library-item summary {
    padding: var(--space-lg);
    cursor: pointer;
    font-weight: 600;
    color: var(--color-tertiary);
    list-style: none;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: space-between;
    transition: all var(--transition-base);
}

.library-item summary:hover {
    background: rgba(0, 163, 191, 0.05);
}

.library-item summary::-webkit-details-marker {
    display: none;
}

.library-item summary::after {
    content: '\f078';
    font-family: 'Font Awesome 6 Free';
    font-weight: 900;
    font-size: 14px;
    color: var(--color-primary);
    transition: transform var(--transition-base);
}

.library-item[open] summary::after {
    transform: rotate(180deg);
}

.library-item[open] summary {
    border-bottom: 1px solid rgba(0, 163, 191, 0.1);
}

.library-content {
    padding: var(--space-lg);
    padding-top: var(--space-md);
    color: var(--text-secondary);
    line-height: 1.8;
    animation: slideDown 0.3s ease-out;
}

@keyframes slideDown {
    from {
        opacity: 0;
        transform: translateY(-10px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* =========================================
   7. Modals & Tooltips
   ========================================= */

/* Modal */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
    opacity: 1;
    transition: opacity 0.3s ease;
}

.modal-overlay.hidden {
    opacity: 0;
    pointer-events: none;
}

.modal-content {
    background-color: var(--bg-card);
    padding: var(--space-xl);
    border-radius: var(--border-radius-lg);
    width: 90%;
    max-width: 500px;
    max-height: 80vh;
    overflow-y: auto;
    box-shadow: var(--shadow-lg);
    transform: translateY(0);
    transition: transform 0.3s ease;
    text-align: center;
}

.modal-overlay.hidden .modal-content {
    transform: translateY(20px);
}

#modal-message {
    margin-bottom: var(--space-lg);
    font-size: var(--font-size-lg);
    color: var(--text-primary);
}

/* Record Detail Modal - scrollable content with padding */
#modal-record-detail {
    padding: var(--space-md);
    max-height: calc(80vh - 120px);
    overflow-y: auto;
}

/* Tooltips */
.tooltip {
    display: none;
    position: absolute;
    background-color: var(--text-primary);
    color: var(--bg-main);
    padding: var(--space-xs) var(--space-sm);
    border-radius: var(--border-radius-sm);
    font-size: var(--font-size-sm);
    bottom: 100%;
    left: 0;
    white-space: nowrap;
    z-index: 10;
    box-shadow: var(--shadow-md);
}

/* Desktop: Show tooltip on hover/focus */
@media (min-width: 960px) {

    .form-group:hover .tooltip,
    input:focus+.tooltip {
        display: block;
    }
}

/* Mobile/Tablet: Use info icon approach if strictly needed, 
   but for simplicity and standard HTML behavior, 
   we rely on the placeholder or helper text for now, 
   or the tooltip class can be toggled via JS if we add an icon. 
   Requirements mentioned "Info icon" for mobile. 
   I will add a pseudo-element or class for that if I were modifying HTML, 
   but here I'll stick to CSS. 
   Let's make sure tooltips are visible when active on mobile if possible, 
   or rely on the text below input. */

/* =========================================
   8. Chart.js Customization (Canvas)
   ========================================= */
canvas {
    max-width: 100%;
}

/* Chart container sizing for proper Chart.js rendering */
.accordion-content {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 700px;
}

@media (max-width: 767px) {
    .accordion-content {
        height: 400px;
    }
}

/* =========================================
   9. Validation Feedback
   ========================================= */
.input-error {
    border-color: var(--color-danger) !important;
    box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.2) !important;
}

.tooltip-error {
    position: absolute;
    background-color: var(--color-danger);
    color: white;
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 12px;
    bottom: 100%;
    left: 0;
    white-space: nowrap;
    z-index: 10;
    margin-bottom: 4px;
    animation: fadeIn 0.2s ease-out;
}

.tooltip-error::after {
    content: '';
    position: absolute;
    top: 100%;
    left: 10px;
    border-width: 5px;
    border-style: solid;
    border-color: var(--color-danger) transparent transparent transparent;
}

/* =========================================
   10. Calendar Styles
   ========================================= */
.day-success {
    background-color: rgba(16, 185, 129, 0.2) !important;
    border-color: var(--color-success) !important;
}

.day-failure {
    background-color: rgba(239, 68, 68, 0.1) !important;
}